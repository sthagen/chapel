#!/usr/bin/env python3

"""
 Multilocale interoperability requires ZMQ
 Installation of the ZMQ library is detected with the find_library function,
 which looks for the appropriate dynamic library (e.g. libzmq.so).
 Note that if the dynamic library is found, this test assumes that the
 header and static library are available.
"""

from __future__ import print_function
from ctypes.util import find_library
import os

# Is ZMQ available?
zmq_found = find_library('zmq') is not None

# Multilocale stuff does not work with LLVM right now.
is_llvm = os.getenv('CHPL_LLVM', 'none') != 'none'

# OK contains the conditions that must be met to run the test
OK = zmq_found and not is_llvm

# Skip if not OK
print(not OK)
